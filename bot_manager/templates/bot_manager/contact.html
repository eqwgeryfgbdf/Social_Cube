{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "Contact Us" %} - Social Cube{% endblock %}

{% block content %}
<div class="contact-container">
    <div class="contact-header">
        <h1>{% trans "Get in Touch" %}</h1>
        <p>{% trans "Have questions or feedback? We'd love to hear from you. Send us a message and we'll respond as soon as possible." %}</p>
    </div>

    <div class="contact-grid">
        <div class="contact-info">
            <div class="contact-info-item">
                <div class="contact-info-icon">
                    <i class="fas fa-map-marker-alt"></i>
                </div>
                <h3 class="contact-info-title">{% trans "Address" %}</h3>
                <p class="contact-info-content">
                    123 Innovation Street<br>
                    Tech Valley, CA 94043<br>
                    United States
                </p>
            </div>

            <div class="contact-info-item">
                <div class="contact-info-icon">
                    <i class="fas fa-envelope"></i>
                </div>
                <h3 class="contact-info-title">{% trans "Email" %}</h3>
                <p class="contact-info-content">
                    <a href="mailto:support@socialcube.com">support@socialcube.com</a>
                </p>
            </div>

            <div class="contact-info-item">
                <div class="contact-info-icon">
                    <i class="fas fa-phone"></i>
                </div>
                <h3 class="contact-info-title">{% trans "Phone" %}</h3>
                <p class="contact-info-content">
                    <a href="tel:+1234567890">+1 (234) 567-890</a>
                </p>
            </div>

            <div class="contact-info-item">
                <div class="contact-info-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <h3 class="contact-info-title">{% trans "Working Hours" %}</h3>
                <p class="contact-info-content">
                    {% trans "Monday - Friday" %}: 9:00 AM - 6:00 PM<br>
                    {% trans "Saturday" %}: 10:00 AM - 4:00 PM<br>
                    {% trans "Sunday" %}: {% trans "Closed" %}
                </p>
            </div>
        </div>

        <div class="contact-form">
            <form id="contactForm" method="post" action="{% url 'contact_submit' %}">
                {% csrf_token %}
                <div class="form-group">
                    <label for="name" class="form-label required">{% trans "Name" %}</label>
                    <input type="text" id="name" name="name" class="form-control" required>
                    <div class="invalid-feedback">{% trans "Please enter your name" %}</div>
                </div>

                <div class="form-group">
                    <label for="email" class="form-label required">{% trans "Email" %}</label>
                    <input type="email" id="email" name="email" class="form-control" required>
                    <div class="invalid-feedback">{% trans "Please enter a valid email address" %}</div>
                </div>

                <div class="form-group">
                    <label for="subject" class="form-label required">{% trans "Subject" %}</label>
                    <input type="text" id="subject" name="subject" class="form-control" required>
                    <div class="invalid-feedback">{% trans "Please enter a subject" %}</div>
                </div>

                <div class="form-group">
                    <label for="message" class="form-label required">{% trans "Message" %}</label>
                    <textarea id="message" name="message" class="form-control" required></textarea>
                    <div class="invalid-feedback">{% trans "Please enter your message" %}</div>
                </div>

                <div class="form-submit">
                    <button type="submit" class="btn-submit">
                        <span class="submit-text">{% trans "Send Message" %}</span>
                        <span class="submit-icon"><i class="fas fa-paper-plane"></i></span>
                    </button>
                </div>

                <div class="form-message" style="display: none;"></div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('contactForm');
    const formMessage = form.querySelector('.form-message');
    const submitButton = form.querySelector('.btn-submit');
    const submitText = submitButton.querySelector('.submit-text');
    const submitIcon = submitButton.querySelector('.submit-icon');

    form.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        // Reset form state
        formMessage.style.display = 'none';
        formMessage.className = 'form-message';
        submitButton.disabled = true;
        submitText.textContent = '{% trans "Sending..." %}';
        submitIcon.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';

        try {
            const formData = new FormData(form);
            const response = await fetch(form.action, {
                method: 'POST',
                body: formData,
                headers: {
                    'X-CSRFToken': formData.get('csrfmiddlewaretoken')
                }
            });

            const data = await response.json();

            if (response.ok) {
                formMessage.textContent = data.message || '{% trans "Message sent successfully!" %}';
                formMessage.classList.add('success');
                form.reset();
            } else {
                formMessage.textContent = data.message || '{% trans "Error sending message. Please try again." %}';
                formMessage.classList.add('error');
            }
        } catch (error) {
            formMessage.textContent = '{% trans "Error sending message. Please try again." %}';
            formMessage.classList.add('error');
        } finally {
            formMessage.style.display = 'block';
            submitButton.disabled = false;
            submitText.textContent = '{% trans "Send Message" %}';
            submitIcon.innerHTML = '<i class="fas fa-paper-plane"></i>';
        }
    });

    // Form validation
    const inputs = form.querySelectorAll('.form-control');
    inputs.forEach(input => {
        input.addEventListener('invalid', function(e) {
            e.preventDefault();
            this.classList.add('is-invalid');
        });

        input.addEventListener('input', function() {
            if (this.validity.valid) {
                this.classList.remove('is-invalid');
            }
        });
    });
});
</script>
{% endblock %} 